<?php
if (isset($_SESSION['loginsucces']) && isset($_SESSION['loginsucces']['BIRTHDATE'])) {
    /*Convertir la fecha de cumpleaÃ±os de la sesiÃ³n a un objeto DateTime*/
    $birthdate = new DateTime($_SESSION['loginsucces']['BIRTHDATE']);
    /*Obtener la fecha de hoy*/
    $today = new DateTime();
    /*Comparar si el mes y el dÃ­a son iguales (ignorar el aÃ±o)*/
    if ($birthdate->format('m-d') === $today->format('m-d')) :
?>
<div class="container my-5 d-flex justify-content-center">
    <div class="card text-center shadow-lg" style="max-width: 400px;">
        <div class="card-header custom-header">
            ðŸŽ‰ Â¡Feliz CumpleaÃ±os! ðŸŽ‰
        </div>
        <div class="card-body">
            <h5 class="card-title">Celebra con un <strong>10% de descuento</strong> en tu compra</h5>
            <p class="card-text">Aprovecha esta oferta especial solo por tu cumpleaÃ±os. Â¡No te lo pierdas!</p>
        </div>
        <div class="card-footer text-muted">
            * VÃ¡lido solo hoy
        </div>
    </div>
</div>
<?php
    endif;
}
?>
<!--SLIDER-->
<div id="slider" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner p-5 border mt-5 mb-5">
        <div class="carousel-item active">
            <img class="d-block w-100" src="assets/images/slider/6.jpg" alt="" height="400px">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="assets/images/slider/13.jpg" alt="" height="400px">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="assets/images/slider/12.jpg" alt="" height="400px">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="assets/images/slider/8.jpg" alt="" height="400px">
        </div>
    </div>
</div>
<div class="container mt-5">
    <div class="row g-4">
        <?php if(sizeof($listNews) == 0) : ?>
        <h1 class="text-center mt-5 mb-5">No hay noticias disponibles</h1>
        <?php else : ?>
        <h1 class="text-center mt-5 mb-5">Nuestras Noticias Mas Recientes</h1>
        <?php foreach($listNews as $list) : ?>
        <!-- Noticias -->
        <div class="col-md-6">
            <div class="p-4 bg-light rounded-3 h-100">
                <div class="row">
                    <div class="col-md-4">
                        <img src="resources/imagesNews/<?=$list['IMAGE']?>" class="img-fluid rounded"
                            alt="Imagen de la noticia 1">
                    </div>
                    <div class="col-md-8">
                        <div class="container-fluid py-3">
                            <h2 class="fw-bold">
                                <?=$list['TITLE']?>
                            </h2>
                            <p class="fs-5">
                                <?=$list['CONTENT']?>
                            </p>
                            <a href="<?=$list['LINK']?>" target="_blank" class="btn btn-primary">Leer mÃ¡s</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <?php endforeach; ?>
        <?php if(sizeof($listNews) == 2) : ?>
        <div class="text-center">
            <a href="<?=init?><?=news?><?=allNews?>" class="btn btn-primary">Ver Todas Las Noticias</a>
        </div>
        <?php endif; ?>
        <?php endif; ?>
    </div>
    <br>
    <br>
</div>
<?php if(isset($_SESSION['aciertodesvinculacion'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['aciertodesvinculacion']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('aciertodesvinculacion'); ?>
<?php if(isset($_SESSION['errorcarrito'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['errorcarrito']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('errorcarrito'); ?>
<?php if(isset($_SESSION['aciertoeliminar'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['aciertoeliminar']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('aciertoeliminar'); ?>
<?php if(isset($_SESSION['errordetalle'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['errordetalle']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('errordetalle'); ?>
<?php if(isset($_SESSION['eliminaracierto'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['eliminaracierto']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('eliminaracierto'); ?>
<?php if(isset($_SESSION['aciertoiniciosesion'])) : ?>
<div id="alerta2" class="position-absolute col-6">
    <div>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Informacion: </strong>
            <?=$_SESSION['aciertoiniciosesion']?>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
</div>
<?php endif; ?>
<?php helps::deleteSession('aciertoiniciosesion'); ?>
<!--PRODUCTOS-->
<section id="content" class="row col-12 ms-5 mb-5">
    <?php if(sizeof($listProducts) == 0) : ?>
    <h1 class="text-center mt-5 mb-5">No hay bebidas disponibles</h1>
    <?php else : ?>
    <h1 class="text-center mt-5 mb-5">Nuestras Bebidas Mas Recientes</h1>
    <?php foreach($listProducts as $list) : ?>
    <div class="card w-25 mx-4 mb-5">
        <img class="card-img-top img-fluid" src="resources/imagesProducts/<?=$list['IMAGE']?>" alt="" width="5px"
            height="200px">
        <div class="card-body">
            <h3 class="card-title text-center">
                <?=$list['NAME']?>
            </h3>
            <p class="card-text text-center text-success">
                <?='$'.number_format($list['PRICE'], 0, ','); ?>
            </p>
            <div class="d-flex justify-content-center align-items-center gap-2">
                <?php if(isset($_SESSION['loginsucces'])) : ?>
                <a href="<?=init?><?=transaction?><?=shop?>&id=<?=$list['PRODUCT_ID']?>" class="btn btn-success w-auto">
                    Comprar Ahora
                </a>
                <?php endif; ?>
                <a href="<?=init?><?=product?><?=detailProduct?>&id=<?=$list['PRODUCT_ID']?>"
                    class="btn btn-primary w-auto">
                    Ver Detalle
                </a>
            </div>
        </div>
    </div>
    <?php endforeach; ?>
    <?php if(sizeof($listAllProducts) > 6) : ?>
    <div class="text-center">
        <a href="<?=init?><?=product?><?=allProducts?>" class="btn btn-primary">Ver Todos Los Productos</a>
    </div>
    <?php endif; ?>
    <?php endif; ?>
</section>